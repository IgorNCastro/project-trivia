(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{15:function(e,t,n){},21:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},33:function(e,t,n){e.exports=n(49)},43:function(e,t){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),o=n(11),i=n(24),l=n(2),u=(n(15),n(3)),m=n.n(u),p=n(22),d=n(6),f=n(20),h=n(9),v=n(10),b=n(13),g=n(12),k=n(21),E=n.n(k),y=n(29),O=n.n(y),S=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://opentdb.com/api_token.php?command=request",e.next=4,fetch("https://opentdb.com/api_token.php?command=request");case 4:return t=e.sent,e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),j=function(e){try{var t=O()(e).toString();return"https://www.gravatar.com/avatar/".concat(t)}catch(n){console.log(n)}},w=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="https://opentdb.com/api.php?amount=5&token=".concat(t),e.next=4,fetch(n);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),x=n(14),N=function(e){return Object(x.a)({type:"RESET_SCORE"},e)},C=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).verifyDisabled=function(){var e=a.state,t=e.email,n=e.name;t.length>0&&n.length>0&&a.setState({isDisabled:!1})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r),(function(){a.verifyDisabled()}))},a.handleLogin=Object(d.a)(m.a.mark((function e(){var t,n,r,c,s,o,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.history,n=a.state,r=n.name,c=n.email,s=n.rankingStorage,e.next=4,a.sendToStore(r,c);case 4:return e.next=6,S();case 6:o=e.sent,i=j(c),l=[].concat(Object(p.a)(s),[{name:r,score:0,picture:i}]),localStorage.setItem("token",o.token),localStorage.setItem("ranking",JSON.stringify(l)),t.push("/game");case 12:case"end":return e.stop()}}),e)}))),a.sendToStore=function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.dispPlayerInfo,c={name:t,email:n},e.next=4,r(c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.toSettingsBtn=function(){a.props.history.push("/settings")},a.state={email:"",name:"",isDisabled:!0,rankingStorage:JSON.parse(localStorage.getItem("ranking"))||[]},a}return Object(v.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isDisabled,n=e.name,a=e.email;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("img",{src:E.a,className:"App-logo",alt:"logo"}),r.a.createElement("form",{className:"form-header"},r.a.createElement("label",{htmlFor:"name"},"Nome",r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"name","data-testid":"input-player-name",value:n,onChange:this.handleChange,autocomplete:"off"})),r.a.createElement("label",{htmlFor:"email"},"Email",r.a.createElement("br",null),r.a.createElement("input",{type:"email",name:"email","data-testid":"input-gravatar-email",value:a,onChange:this.handleChange,autocomplete:"off"})),r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:t,onClick:this.handleLogin},"Play"),r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:this.toSettingsBtn},"Settings"))))}}]),n}(a.Component),T=Object(o.b)(null,(function(e){return{dispPlayerInfo:function(t){return e(function(e){return Object(x.a)({type:"SET_PLAYER_INFO"},e)}(t))}}}))(C),R=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).setHeader=function(){var e=JSON.parse(localStorage.getItem("ranking")),t=a.props.score,n=e.length-1;a.setState({name:e[n].name,picture:e[n].picture,score:t})},a.state={name:"",picture:"",score:0},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.setHeader()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.picture,a=e.score;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("img",{src:E.a,className:"logo-in-game",alt:"logo"}),r.a.createElement("div",{className:"info-header"},r.a.createElement("img",{src:n,alt:t,"data-testid":"header-profile-picture"}),r.a.createElement("div",{className:"name-score-header"},r.a.createElement("h3",{"data-testid":"header-player-name"},t),r.a.createElement("h3",{"data-testid":"header-score"},a)))))}}]),n}(a.Component),q=Object(o.b)((function(e){return{score:e.player.score}}))(R),I=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).setQuestions=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,w(t);case 3:if(0===(n=e.sent).response_code){e.next=6;break}return e.abrupt("return",a.invalidToken());case 6:a.setState({questions:n.results},(function(){a.selectQuestion()}));case 7:case"end":return e.stop()}}),e)}))),a.invalidToken=function(){var e=a.props.history;localStorage.setItem("token",""),e.push("/")},a.selectQuestion=function(){var e=a.state,t=e.questions,n=e.counter,r=t.filter((function(e,t){return t===n}));a.setState({question:r}),a.renderAlternatives(r[0]),a.renderTimer()},a.renderAlternatives=function(e){var t=e.correct_answer,n=e.incorrect_answers.map((function(e,t){return{key:t,className:"wrong",id:"wrong-answer-".concat(t),name:e}})),r=[{key:"right",className:"right",id:"correct-answer",name:t}].concat(Object(p.a)(n)),c=r.sort((function(){return Math.random()-.5}));a.setState({alternatives:c})},a.clickedAnswer=function(e){a.updateScore(e),a.setState({nextBtn:!0,right:"right-answer",wrong:"wrong-answer"})},a.updateScore=function(e){var t=e.target;a.killTimer();var n=a.state.question,r=n[0].difficulty;if(t.innerHTML===n[0].correct_answer)return"hard"===r?a.calculateScore(3):"medium"===r?a.calculateScore(2):a.calculateScore(1)},a.calculateScore=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 10,n=a.props.dispScore,r=a.state.seconds,1,c={score:10+r*t,assertions:1},e.next=8,n(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderTimer=function(){var e=setInterval(a.setTimer,1e3);a.setState({interval:e})},a.setTimer=function(){var e=a.state.seconds;if(0===e)return a.killTimer();var t=e-1;a.setState({seconds:t})},a.killTimer=function(){var e=a.state.interval;clearInterval(e),a.setState({btnDisabled:!0,nextBtn:!0})},a.clickedNextBtn=function(){a.setState((function(e){return{counter:e.counter+1,seconds:30,btnDisabled:!1,nextBtn:!1,right:"",wrong:""}})),a.nextQuestion()},a.nextQuestion=function(){var e=a.state,t=e.questions,n=e.counter;if((n+=1)>=5)return a.props.history.push("/feedback");var r=t.filter((function(e,t){return t===n}));a.setState({question:r}),a.renderAlternatives(r[0]),a.renderTimer()},a.state={questions:[],question:[],alternatives:[],counter:0,seconds:30,btnDisabled:!1,nextBtn:!1,right:"",wrong:""},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.setQuestions()}},{key:"render",value:function(){var e=this,t=this.state,n=t.question,a=t.alternatives,c=t.seconds,s=t.nextBtn,o=t.btnDisabled,i=t.right,l=t.wrong;return r.a.createElement("div",{className:"game-card"},r.a.createElement(q,null),r.a.createElement("div",{className:"time-clock"},r.a.createElement("h3",null,"Time"),r.a.createElement("h3",null,c)),r.a.createElement("div",null,s&&r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:this.clickedNextBtn},"Next")),r.a.createElement("div",{className:"cat-quest-answer"},n.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h2",{"data-testid":"question-category"},e.category),r.a.createElement("h1",{"data-testid":"question-text"},e.question))})),r.a.createElement("div",{"data-testid":"answer-options"},a.map((function(t){return r.a.createElement("button",{key:t.key,"data-testid":t.id,className:"right"===t.className?i:l,type:"button",onClick:e.clickedAnswer,disabled:o},t.name)})))))}}]),n}(a.Component),A=Object(o.b)(null,(function(e){return{dispScore:function(t){return e(function(e){return Object(x.a)({type:"SET_SCORE"},e)}(t))}}}))(I),D=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).toLoginBtn=function(){e.props.history.push("/")},e}return Object(v.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Settings"),r.a.createElement("button",{type:"button",onClick:this.toLoginBtn},"Back")))}}]),n}(a.Component),_=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).clickedPlayAgain=Object(d.a)(m.a.mark((function e(){var t,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.history,r=t.dispResetScore,c={score:0,assertions:0},e.next=4,r(c);case 4:n.push("/");case 5:case"end":return e.stop()}}),e)}))),a.clickedToRanking=function(){a.props.history.push("/ranking")},a.state={score:0,assertions:0,minRights:3},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.score,n=e.assertions;this.setState({score:t,assertions:n});var a=JSON.parse(localStorage.getItem("ranking"));a[a.length-1].score=t,localStorage.setItem("ranking",JSON.stringify(a))}},{key:"render",value:function(){var e=this.state,t=e.score,n=e.assertions,a=e.minRights;return r.a.createElement("div",null,r.a.createElement(q,null),r.a.createElement("div",{className:"feed-final"},n<a?r.a.createElement("h3",{"data-testid":"feedback-text"},"Could be better..."):r.a.createElement("h3",{"data-testid":"feedback-text"},"Well Done!"),r.a.createElement("p",null,"Placar Final:"),r.a.createElement("p",{"data-testid":"feedback-total-score"},t),r.a.createElement("p",null,"Acertos:"),r.a.createElement("p",{"data-testid":"feedback-total-question"},n),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:this.clickedPlayAgain},"Play Again"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:this.clickedToRanking},"Ranking")))}}]),n}(a.Component),B=Object(o.b)((function(e){return{score:e.player.score,assertions:e.player.assertions}}),(function(e){return{dispResetScore:function(t){return e(N(t))}}}))(_),P=function(e,t){var n=e.score;return t.score-n},J=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).clickedGoHome=Object(d.a)(m.a.mark((function e(){var t,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.history,r=t.dispResetScore,c={score:0,assertions:0},e.next=4,r(c);case 4:n.push("/");case 5:case"end":return e.stop()}}),e)}))),a.state={rankingUsers:[]},a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("ranking")).sort(P);this.setState({rankingUsers:e})}},{key:"render",value:function(){var e=this.state.rankingUsers;return r.a.createElement("div",null,r.a.createElement("h1",{className:"title-ranking","data-testid":"ranking-title"},"Ranking"),e.map((function(e,t){return r.a.createElement("div",{key:t,className:"ranking"},r.a.createElement("img",{src:e.picture,alt:e.name}),r.a.createElement("h4",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("h4",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement("div",{className:"btn-ranking"},r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:this.clickedGoHome},"Go Home")))}}]),n}(a.Component),L=Object(o.b)(null,(function(e){return{dispResetScore:function(t){return e(N(t))}}}))(J);function M(){return r.a.createElement("div",null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/game",component:A}),r.a.createElement(l.a,{exact:!0,path:"/settings",component:D}),r.a.createElement(l.a,{exact:!0,path:"/feedback",component:B}),r.a.createElement(l.a,{exact:!0,path:"/ranking",component:L}),r.a.createElement(l.a,{exact:!0,path:"/",component:T})))}var H=n(17),Q=n(31),F=n(32),G={name:"",assertions:0,score:0,gravatarEmail:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYER_INFO":return Object(x.a)(Object(x.a)({},e),{},{name:t.name,gravatarEmail:t.email});case"SET_SCORE":return Object(x.a)(Object(x.a)({},e),{},{score:e.score+t.score,assertions:e.assertions+t.assertions});case"RESET_SCORE":return Object(x.a)(Object(x.a)({},e),{},{score:t.score,assertions:t.assertions});default:return e}},W=Object(H.combineReducers)({player:U}),Y=Object(H.legacy_createStore)(W,Object(Q.composeWithDevTools)(Object(H.applyMiddleware)(F.a)));window.Cypress&&(window.store=Y);var z=Y;s.a.render(r.a.createElement(i.a,{basename:"/project-trivia"},r.a.createElement(o.a,{store:z},r.a.createElement(M,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.18fa2d7f.chunk.js.map